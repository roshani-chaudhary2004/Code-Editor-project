<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .main{
            width: 1000px;
            margin:auto;
             padding: 20px 0px;
             text-align:center;
        }
        .main h1{
            padding:20px 0px;
        }
        .products{
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        .card{
            width:32%;
            border-radius:15px ;
            overflow: hidden;
            box-shadow: 0px 0px 5px 2px gray;
            margin-top: 10px;

            
        }
        .card img{
            width: 100%;
            
        }
        .card p{
            padding:20px 0px;
            font-size:25px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="main">
        <h1>Lazy Load</h1>
        <div class="products">
            <!-- <div class="card">
                <img style="background: pink;"  src="https://placehold.co/150x150/ff5733/ffffff?text=1" alt="">
                <p>Item 1</p>
            </div> -->
        </div>
    </div>
</body>
<script>
  const data=[
 
  { "albumId": 1, "id": 1,  "title": "Item 1",  "thumbnailUrl": "https://placehold.co/150x150/ff5733/ffffff?text=1" },
  { "albumId": 1, "id": 2,  "title": "Item 2",  "thumbnailUrl": "https://placehold.co/150x150/33ff57/ffffff?text=2" },
  { "albumId": 1, "id": 3,  "title": "Item 3",  "thumbnailUrl": "https://placehold.co/150x150/3357ff/ffffff?text=3" },
  { "albumId": 1, "id": 4,  "title": "Item 4",  "thumbnailUrl": "https://placehold.co/150x150/ff33a8/ffffff?text=4" },
  { "albumId": 1, "id": 5,  "title": "Item 5",  "thumbnailUrl": "https://placehold.co/150x150/33fff3/000000?text=5" },

  { "albumId": 1, "id": 6,  "title": "Item 6",  "thumbnailUrl": "https://placehold.co/150x150/8e44ad/ffffff?text=6" },
  { "albumId": 1, "id": 7,  "title": "Item 7",  "thumbnailUrl": "https://placehold.co/150x150/16a085/ffffff?text=7" },
  { "albumId": 1, "id": 8,  "title": "Item 8",  "thumbnailUrl": "https://placehold.co/150x150/f39c12/ffffff?text=8" },
  { "albumId": 1, "id": 9,  "title": "Item 9",  "thumbnailUrl": "https://placehold.co/150x150/c0392b/ffffff?text=9" },
  { "albumId": 1, "id": 10, "title": "Item 10", "thumbnailUrl": "https://placehold.co/150x150/2c3e50/ffffff?text=10" },

  { "albumId": 1, "id": 11, "title": "Item 11", "thumbnailUrl": "https://placehold.co/150x150/27ae60/ffffff?text=11" },
  { "albumId": 1, "id": 12, "title": "Item 12", "thumbnailUrl": "https://placehold.co/150x150/2980b9/ffffff?text=12" },
  { "albumId": 1, "id": 13, "title": "Item 13", "thumbnailUrl": "https://placehold.co/150x150/d35400/ffffff?text=13" },
  { "albumId": 1, "id": 14, "title": "Item 14", "thumbnailUrl": "https://placehold.co/150x150/7f8c8d/ffffff?text=14" },
  { "albumId": 1, "id": 15, "title": "Item 15", "thumbnailUrl": "https://placehold.co/150x150/1abc9c/ffffff?text=15" },

  { "albumId": 1, "id": 16, "title": "Item 16", "thumbnailUrl": "https://placehold.co/150x150/9b59b6/ffffff?text=16" },
  { "albumId": 1, "id": 17, "title": "Item 17", "thumbnailUrl": "https://placehold.co/150x150/34495e/ffffff?text=17" },
  { "albumId": 1, "id": 18, "title": "Item 18", "thumbnailUrl": "https://placehold.co/150x150/e67e22/ffffff?text=18" },
  { "albumId": 1, "id": 19, "title": "Item 19", "thumbnailUrl": "https://placehold.co/150x150/95a5a6/000000?text=19" },
  { "albumId": 1, "id": 20, "title": "Item 20", "thumbnailUrl": "https://placehold.co/150x150/2ecc71/ffffff?text=20" },

  { "albumId": 1, "id": 21, "title": "Item 21", "thumbnailUrl": "https://placehold.co/150x150/3498db/ffffff?text=21" },
  { "albumId": 1, "id": 22, "title": "Item 22", "thumbnailUrl": "https://placehold.co/150x150/e74c3c/ffffff?text=22" },
  { "albumId": 1, "id": 23, "title": "Item 23", "thumbnailUrl": "https://placehold.co/150x150/6c5ce7/ffffff?text=23" },
  { "albumId": 1, "id": 24, "title": "Item 24", "thumbnailUrl": "https://placehold.co/150x150/f1c40f/000000?text=24" },
  { "albumId": 1, "id": 25, "title": "Item 25", "thumbnailUrl": "https://placehold.co/150x150/00cec9/000000?text=25" },
   { "albumId": 1, "id": 11, "title": "Item 11", "thumbnailUrl": "https://placehold.co/150x150/27ae60/ffffff?text=11" },
  { "albumId": 1, "id": 12, "title": "Item 12", "thumbnailUrl": "https://placehold.co/150x150/2980b9/ffffff?text=12" },
];

const  productDiv=document.querySelector(".products");
let start=0;
let limit=9;

let ifLoading=false;

const loadData=()=>{
    if(ifLoading){
        return;
    };
    ifLoading=true;
    let newDiv='';

    let actualData=data.slice(start,limit);

      actualData.forEach((item)=>{
    // data.forEach((item)=>{
        // newDiv +=`<div class="card">
        //         <img  src="${item.thumbnailUrl}">
        //         <p>"${item.title}"</p>
        //     </div>`



            newDiv += `
        <div class="card">
            <img 
                src="${item.thumbnailUrl}" 
                loading="lazy"
                width="300"
                height="300"
                alt="${item.title}"
            >
            <p>"${item.title}"</p>
        </div>`;
    })

    //    productDiv.innerHTML=newDiv;
     ifLoading=false;
    productDiv.innerHTML +=newDiv;
       if(limit>27){
        ifLoading=true;
      }
      start +=9;
       limit +=9;
   
}
loadData(); // call kiya
// scrooling use
window.addEventListener('scroll',()=>{
  let bottomEL=productDiv.getBoundingClientRect().bottom; // top aur bottom se distance
  let windoHEIGHT= window.innerHeight;
  if(bottomEL<windoHEIGHT){
    loadData();
  }
})
</script>
</html>